find images -type f -exec file --mime-type {} \+ | awk -F: '{if ($2 ~/image\//) print $1}' | cut -d'/' -f2- | while read -r; do file="$REPLY"; d_name=$(dirname "$file"); mkdir -p "$(printf "images_lowres/"; printf "$d_name")"; printf 'convert -geometry '; printf $1; printf 'x '; printf '"images/'; printf "$file"; printf '" '; printf '"images_lowres/'; printf "$file"; printf '"\n'; done
